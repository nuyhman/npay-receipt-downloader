<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>NPay Receipt Downloader</title>
    <style>
      body {
        width: 300px;
        padding: 10px;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto,
          Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
        height: 100%;
        overflow: hidden;
      }
      h2 {
        font-size: 16px;
        margin-bottom: 10px;
        color: #333;
      }
      button {
        width: 100%;
        padding: 8px;
        background-color: #01de5a;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
      }
      .description {
        margin-bottom: 15px;
        font-size: 14px;
      }
      .form-group {
        margin-top: 15px;
        margin-bottom: 15px;
        background: #f5f5f5;
        padding: 12px;
        border-radius: 6px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
      }
      .form-group .form-field {
        display: flex;
        flex-direction: row;
      }
      .form-group .form-field select {
        flex-basis: 33%;
        margin-right: 10px;
      }
      .form-group .form-field button {
        padding: 10px;
        margin-left: 10px;
        flex-basis: 66%;
        background-color: #fff;
        border: 1px solid #03c75a;
        color: #03c75a;
      }

      .form-group .form-label {
        display: block;
        margin-bottom: 8px;
        font-size: 14px;
        font-weight: 600;
        color: #333;
      }
      .form-group select {
        width: 100%;
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 4px;
        font-size: 14px;
        background-color: white;
        cursor: pointer;
        transition: border-color 0.2s, box-shadow 0.2s;
        appearance: none;
        background-image: url('data:image/svg+xml;utf8,<svg fill="gray" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M7 10l5 5 5-5z"/></svg>');
        background-repeat: no-repeat;
        background-position: right 8px center;
      }
      .form-group select:focus {
        outline: none;
        border-color: #01de5a;
        box-shadow: 0 0 0 2px rgba(3, 199, 90, 0.2);
      }
      .form-group select:hover {
        border-color: #01de5a;
      }
      .form-group .price-display {
        font-size: 18px;
        font-weight: bold;
        color: #03c75a;
        text-align: center;
        padding: 10px 0;
      }
      #downloadStart,
      #downloadCombined {
        color: #000;
        padding: 10px;
        font-weight: bold;
      }
      ul.description {
        padding-left: 16px;
      }
      .description li {
        color: #333;
        font-size: 12px;
        margin-bottom: 4px;
      }
    </style>
  </head>
  <body>
    <h2>N 주문 영수증 <small>후두다닥</small></h2>
    <div class="form-group">
      <label for="monthSelect" class="form-label">조회할 월 선택</label>
      <div class="form-field">
        <select id="monthSelect" class="form-control">
          <option value="1">1월</option>
          <option value="2">2월</option>
          <option value="3">3월</option>
          <option value="4">4월</option>
          <option value="5">5월</option>
          <option value="6">6월</option>
          <option value="7">7월</option>
          <option value="8">8월</option>
          <option value="9">9월</option>
          <option value="10">10월</option>
          <option value="11">11월</option>
          <option value="12">12월</option>
        </select>
        <button id="openOrdersBtn">결제내역 조회</button>
      </div>
    </div>

    <!-- 총액 표시 영역 추가 -->
    <div class="form-group" id="totalPriceContainer" style="display: none">
      <label class="form-label">총 결제 금액</label>
      <div class="price-display" id="totalPriceDisplay">0원</div>
    </div>

    <div class="form-group">
      <label class="form-label">다운로드 방식</label>
      <div style="display: flex; align-items: center; gap: 16px">
        <div style="display: flex; align-items: center">
          <input
            type="radio"
            id="combinedDownload"
            name="downloadMode"
            value="combined"
            checked
            style="width: 16px; height: 16px; cursor: pointer"
          />
          <label
            for="combinedDownload"
            style="margin-left: 5px; font-weight: normal; font-size: 14px"
            >통합 다운로드</label
          >
        </div>
        <div style="display: flex; align-items: center">
          <input
            type="radio"
            id="individualDownload"
            name="downloadMode"
            value="individual"
            style="width: 16px; height: 16px; cursor: pointer"
          />
          <label
            for="individualDownload"
            style="margin-left: 5px; font-weight: normal; font-size: 14px"
            >개별 다운로드</label
          >
        </div>
      </div>
    </div>

    <button id="downloadStart">시작하기</button>

    <!-- 통합 이미지 다운로드 버튼 (숨겨진 상태로 시작) -->
    <button
      id="downloadCombined"
      style="
        display: none;
        margin-top: 10px;
        background-color: #defae4;
        color: #09ab49;
      "
    >
      통합 이미지 다운로드 (0개)
    </button>

    <!-- 안내문구 -->
    <ul class="description">
      <li>결제 내역이 많은 경우 ‘이전 내역 더보기’를 클릭해 주세요.</li>
      <li>
        영수증 다운로드 후 아이콘을 클릭하면 총 결제 금액을 확인할 수 있어요.
      </li>
      <li>
        통합 다운로드 방식은 영수증을 하나의 이미지로 합쳐서 다운로드해요.
        영수증 탭이 닫힌 뒤 아이콘을 클릭하면 통합 이미지 다운로드를 할 수
        있어요.
      </li>
    </ul>
    <script src="popup.js"></script>
  </body>
</html>
